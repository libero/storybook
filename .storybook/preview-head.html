<script>
  // TODO: Document
  const getIntendedAttributeValue = (attribute) => {
    const strWithInitialCapital = (str) => {
      const initialCapital = str.charAt(0).toUpperCase();
      return `${initialCapital}${str.substring(1)}`;
    };

    const allowed = ['dir', 'lang'];
    if (allowed.indexOf(attribute) > -1) {
      const target = document.querySelector(`[data-storybook-only-${attribute}]`);
      return target.dataset[`storybookOnly${strWithInitialCapital(attribute)}`];
    }
    return '';
  };

  const updateHtmlAttributes = () => {
    const attributeNames = ['dir', 'lang'];
    attributeNames.forEach((name) => document.querySelector('html').setAttribute(name, getIntendedAttributeValue(name)));
  };

  window.setTimeout(updateHtmlAttributes, 3000);
</script>
